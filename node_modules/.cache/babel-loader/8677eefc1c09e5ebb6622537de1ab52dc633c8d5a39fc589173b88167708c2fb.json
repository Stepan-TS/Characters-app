{"ast":null,"code":"var _jsxFileName = \"/Users/stepan12/Documents/characters/Characters-app/src/pages/Characters/Characters.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './Characters.scss';\nimport CardList from '../../components/CardList/CardList';\nimport Pagination from '../../components/Pagination/Pagination';\nimport UserMenu from '../../components/UserMenu/UserMenu';\nimport Logo from '../../components/Logo/Logo';\nimport { filterByName } from '../../helpers/heplerFunction';\nimport { getCharacters } from '../../api/api';\nimport SearchIcon from '../../image/search.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Characters = _ref => {\n  _s();\n  let {\n    userName\n  } = _ref;\n  const [characters, setCharacters] = useState([]);\n  const [query, setQuery] = useState('');\n  const [visiableCharacters, setVisiableCharacters] = useState([]);\n  const [newQuery, setNewQuery] = useState('');\n  const firstPage = 1;\n  const countCardsOfPage = 8;\n  const [currentPage, setCurrentPage] = useState(firstPage);\n  const [recordsPerPage] = useState(countCardsOfPage);\n  const indexOfLastRecord = currentPage * recordsPerPage;\n  const indexOfFirstRecord = indexOfLastRecord - recordsPerPage;\n  const currentRecords = visiableCharacters.slice(indexOfFirstRecord, indexOfLastRecord);\n  const nPages = Math.ceil(visiableCharacters.length / recordsPerPage);\n  const getQuery = localStorage.getItem('query') || '';\n  const getCurrentPage = localStorage.getItem('currentPage') ? Number(localStorage.getItem('currentPage')) : firstPage;\n  const getUserName = localStorage.getItem(userName) || '';\n  const checkIsNewQuery = newQuery !== null;\n  const handlerChange = event => {\n    setQuery(event.target.value);\n  };\n  useEffect(() => {\n    window.localStorage.setItem('userName', JSON.stringify(userName));\n  }, [userName]);\n  const handlerReturnToMainPage = () => {\n    window.localStorage.setItem('currentPage', JSON.stringify(String(firstPage)));\n    window.location.reload();\n  };\n  useEffect(() => {\n    if (visiableCharacters.length < countCardsOfPage + 1) {\n      setCurrentPage(firstPage);\n    }\n  }, [visiableCharacters.length]);\n  useEffect(() => {\n    getCharacters(setCharacters);\n  }, []);\n  useEffect(() => {\n    setVisiableCharacters(filterByName(characters, query));\n  }, [characters, query]);\n  useEffect(() => {\n    if (checkIsNewQuery && query.length !== newQuery.length) {\n      window.localStorage.setItem('query', JSON.stringify(query));\n    }\n    if (currentPage >= firstPage) {\n      window.localStorage.setItem('currentPage', JSON.stringify(currentPage));\n    }\n  }, [query, currentPage]);\n  useEffect(() => {\n    if (checkIsNewQuery) {\n      setQuery(newQuery);\n    }\n  }, [newQuery]);\n  useEffect(() => {\n    if (checkIsNewQuery) {\n      setNewQuery(JSON.parse(getQuery));\n    }\n  }, [getQuery]);\n  useEffect(() => {\n    if (getCurrentPage && getCurrentPage > firstPage) {\n      setCurrentPage(getCurrentPage);\n    }\n  }, []);\n  console.log(userName);\n  console.log(getUserName);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home-page__content\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(UserMenu, {\n          userName: getUserName,\n          setQuery: setQuery\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"content-header\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/Characters-app/#/characters/#/\",\n            className: \"home-page__logo\",\n            onClick: handlerReturnToMainPage,\n            children: /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"search-form\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"search-form__icon\",\n              src: SearchIcon,\n              alt: \"SearchIcon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"search-form__input\",\n              type: \"text\",\n              defaultValue: newQuery || '',\n              name: \"search\",\n              placeholder: \"Filter by name...\",\n              onChange: handlerChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardList, {\n          characters: currentRecords\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"pagination\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          nPages: nPages,\n          currentPage: currentPage,\n          setCurrentPage: setCurrentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(Characters, \"9EOxJMnKSIwPcGH96nQq5GNYiK8=\");\n_c = Characters;\nexport default Characters;\nvar _c;\n$RefreshReg$(_c, \"Characters\");","map":{"version":3,"names":["React","useEffect","useState","CardList","Pagination","UserMenu","Logo","filterByName","getCharacters","SearchIcon","jsxDEV","_jsxDEV","Characters","_ref","_s","userName","characters","setCharacters","query","setQuery","visiableCharacters","setVisiableCharacters","newQuery","setNewQuery","firstPage","countCardsOfPage","currentPage","setCurrentPage","recordsPerPage","indexOfLastRecord","indexOfFirstRecord","currentRecords","slice","nPages","Math","ceil","length","getQuery","localStorage","getItem","getCurrentPage","Number","getUserName","checkIsNewQuery","handlerChange","event","target","value","window","setItem","JSON","stringify","handlerReturnToMainPage","String","location","reload","parse","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","href","onClick","src","alt","type","defaultValue","name","placeholder","onChange","_c","$RefreshReg$"],"sources":["/Users/stepan12/Documents/characters/Characters-app/src/pages/Characters/Characters.tsx"],"sourcesContent":["import React, { ChangeEvent, useEffect, useState } from 'react';\nimport './Characters.scss';\n\nimport CardList from '../../components/CardList/CardList';\nimport Pagination from '../../components/Pagination/Pagination';\nimport UserMenu from '../../components/UserMenu/UserMenu';\nimport Logo from '../../components/Logo/Logo';\n\nimport { filterByName } from '../../helpers/heplerFunction';\nimport { getCharacters } from '../../api/api';\n\nimport { Character } from '../../types';\n\nimport SearchIcon from '../../image/search.png';\n\ntype Props = {\n  userName: string;\n}\n\nconst Characters: React.FC<Props> = ({ userName }) => {\n  const [characters, setCharacters] = useState<Character[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [visiableCharacters, setVisiableCharacters] = useState<Character[]>([])\n  const [newQuery, setNewQuery] = useState<string>('')\n\n  const firstPage = 1;\n  const countCardsOfPage = 8;\n\n  const [currentPage, setCurrentPage] = useState(firstPage);\n  const [recordsPerPage] = useState(countCardsOfPage);\n  \n  const indexOfLastRecord = currentPage * recordsPerPage;\n  const indexOfFirstRecord = indexOfLastRecord - recordsPerPage;\n  const currentRecords = visiableCharacters.slice(indexOfFirstRecord, indexOfLastRecord);\n  const nPages = Math.ceil(visiableCharacters.length / recordsPerPage)\n\n  const getQuery = localStorage.getItem('query') || '';\n  \n  const getCurrentPage = localStorage.getItem('currentPage')\n    ?  Number(localStorage.getItem('currentPage'))\n    :  firstPage;\n\n  const getUserName = localStorage.getItem(userName) || '';\n\n  const checkIsNewQuery = newQuery !== null;\n\n  const handlerChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setQuery(event.target.value)\n  }\n\n  useEffect(() => {\n    window.localStorage.setItem('userName', JSON.stringify(userName));\n  }, [userName]);\n\n  const handlerReturnToMainPage = () => {\n    window.localStorage.setItem('currentPage', JSON.stringify(String(firstPage)))\n    window.location.reload();\n  }\n\n  useEffect(() => {\n    if (visiableCharacters.length < (countCardsOfPage + 1)) {\n      setCurrentPage(firstPage);\n    }\n  }, [visiableCharacters.length])\n\n  useEffect(() => {\n    getCharacters(setCharacters);\n  }, [])\n\n  useEffect(() => {    \n    setVisiableCharacters(filterByName(characters, query));\n  }, [characters, query])\n\n  useEffect(() => {\n    if (checkIsNewQuery && query.length !== newQuery.length) {\n      window.localStorage.setItem('query', JSON.stringify(query));\n    }\n\n    if (currentPage >= firstPage) {\n      window.localStorage.setItem('currentPage', JSON.stringify(currentPage));\n    }\n  }, [query, currentPage])\n\n\n  useEffect(() => {\n    if (checkIsNewQuery) {\n      setQuery(newQuery);\n    }\n  }, [newQuery])\n\n  useEffect(() => {\n    if (checkIsNewQuery) {\n      setNewQuery(JSON.parse(getQuery));\n    } \n  }, [getQuery])\n\n  useEffect(() => {\n    if (getCurrentPage && getCurrentPage > firstPage) {\n      setCurrentPage(getCurrentPage);\n    } \n  }, [])\n\n  console.log(userName)\n  console.log(getUserName);\n\n  return (\n    <div className='home-page'>\n      <div className='home-page__content'>\n        <section className='content'>\n          <UserMenu \n            userName={getUserName} \n            setQuery={setQuery}\n          />\n\n          <header className='content-header'>\n            <a \n              href='/Characters-app/#/characters/#/'\n              className='home-page__logo'\n              onClick={handlerReturnToMainPage}\n            >\n              <Logo />\n            </a>\n          </header>\n          \n          <form\n            className=\"search-form\"\n          >\n            <label>\n              <img\n                className='search-form__icon'\n                src={SearchIcon}\n                alt='SearchIcon'\n              />\n\n              <input \n                className=\"search-form__input\"\n                type=\"text\"\n                defaultValue={newQuery || ''}\n                name=\"search\"\n                placeholder=\"Filter by name...\"\n                onChange={handlerChange}\n              />\n            </label>\n          </form>\n\n          <CardList characters={currentRecords} />\n        </section>\n        \n        <section className='pagination'>\n          <Pagination\n            nPages={nPages}\n            currentPage={currentPage}\n            setCurrentPage={setCurrentPage}\n          />\n        </section>\n      </div>\n    </div>\n  )\n}\n\nexport default Characters;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}