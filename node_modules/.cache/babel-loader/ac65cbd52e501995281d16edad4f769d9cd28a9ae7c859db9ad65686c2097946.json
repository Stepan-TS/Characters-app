{"ast":null,"code":"import _slicedToArray from\"/Users/stepan12/Documents/characters/Characters-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{getAuth,onAuthStateChanged}from'firebase/auth';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthRoute=function AuthRoute(props){var children=props.children;var auth=getAuth();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];useEffect(function(){AuthCheck();return function(){return AuthCheck();};},[auth]);var AuthCheck=onAuthStateChanged(auth,function(user){if(user){setLoading(false);}else{console.log('unauthorized');navigate('/login');}});if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsx(\"div\",{className:\"auth-route\",children:children});};export default AuthRoute;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getAuth","onAuthStateChanged","jsx","_jsx","AuthRoute","props","children","auth","navigate","_useState","_useState2","_slicedToArray","loading","setLoading","AuthCheck","user","console","log","className"],"sources":["/Users/stepan12/Documents/characters/Characters-app/src/components/AuthRoute/AuthRoute.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\n\nimport { AuthRouteProps } from \"../../types\";\n\nconst AuthRoute: React.FC<AuthRouteProps> = (props) => {\n  const { children } = props;\n  const auth = getAuth();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    AuthCheck();\n    return () => AuthCheck();\n  }, [auth]);\n\n  const AuthCheck = onAuthStateChanged(auth, (user) => {\n    if (user) {\n      setLoading(false);\n    } else {\n      console.log('unauthorized');\n      navigate('/login');\n    }\n  });\n\n  if (loading) return <p>Loading...</p>\n\n  return (\n    <div className=\"auth-route\">\n      {children}\n    </div>\n  )\n}\n\nexport default AuthRoute;"],"mappings":"yIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,OAASC,OAAO,CAAEC,kBAAkB,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAI5D,GAAM,CAAAC,SAAmC,CAAG,QAAtC,CAAAA,SAAmCA,CAAIC,KAAK,CAAK,CACrD,GAAQ,CAAAC,QAAQ,CAAKD,KAAK,CAAlBC,QAAQ,CAChB,GAAM,CAAAC,IAAI,CAAGP,OAAO,EAAE,CACtB,GAAM,CAAAQ,QAAQ,CAAGT,WAAW,EAAE,CAC9B,IAAAU,SAAA,CAA8BX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAtCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAE1Bb,SAAS,CAAC,UAAM,CACdiB,SAAS,EAAE,CACX,MAAO,kBAAM,CAAAA,SAAS,EAAE,GAC1B,CAAC,CAAE,CAACP,IAAI,CAAC,CAAC,CAEV,GAAM,CAAAO,SAAS,CAAGb,kBAAkB,CAACM,IAAI,CAAE,SAACQ,IAAI,CAAK,CACnD,GAAIA,IAAI,CAAE,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,CACLG,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC3BT,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAC,CAEF,GAAII,OAAO,CAAE,mBAAOT,IAAA,MAAAG,QAAA,CAAG,YAAU,EAAI,CAErC,mBACEH,IAAA,QAAKe,SAAS,CAAC,YAAY,CAAAZ,QAAA,CACxBA,QAAQ,EACL,CAEV,CAAC,CAED,cAAe,CAAAF,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}